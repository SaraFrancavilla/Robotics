<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Robotics: src/ros2_ur5_interface Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Robotics
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_2d1af1354bc516cd7be7c497ce004061.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">ros2_ur5_interface Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="subdirs" name="subdirs"></a>
Directories</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_c01438f7a0c45bcd3055ae6702dd1693.html">launch</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_290322f5f704a180ac61d6d6e5379707.html">src</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This repository provides <b>auxiliary resources</b> to help students and robotics enthusiasts visualize simulations and create new nodes for their projects. It complements the <a href="https://hub.docker.com/r/pla10/ros2_ur5_interface"><b>pla10/ros2_ur5_interface</b></a> Docker image, which delivers a pre-configured ROS 2 Jazzy environment tailored for the <b>UR5 manipulator robot</b>. This repo is included, at its latest release, in the /home/ubuntu/ros2_ws of the <a href="https://hub.docker.com/r/pla10/ros2_ur5_interface"><b>pla10/ros2_ur5_interface</b></a> Docker image.</p>
<p>The resources in this repository were developed for the <b>"Fundamentals of Robotics" course</b> at the <b>University of Trento</b> and aim to streamline project development and learning.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md2"></a>
Features</h1>
<ul>
<li><b>Simulation visualization</b>: Tools to interact with the UR5 simulation in a graphical environment.</li>
<li><b>Example ROS 2 nodes</b>: Includes a sample node for trajectory publication to get you started.</li>
<li><b>Launch files</b>: Ready-to-use launch files for interacting with the simulated or real UR5 robot.</li>
<li><b>Bash scripts</b>: Simplifies running the UR5 simulation and ROS 2 environments with pre-defined commands.</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md4"></a>
Repository Structure</h1>
<div class="fragment"><div class="line">.</div>
<div class="line">├── launch/</div>
<div class="line">│   ├── sim.launch.py                     # Launch file to simulate the UR5 robot in gazebo</div>
<div class="line">│   ├── interface.launch.py               # Launch file to interact with simulated and real UR5 robot</div>
<div class="line">├── src/</div>
<div class="line">│   ├── gripper_service.cpp               # Node that provides a service to open/close the gripper</div>
<div class="line">│   ├── publish_trajectory_node.cpp       # Example node for trajectory publication</div>
<div class="line">├── config/</div>
<div class="line">│   ├── ur_controllers.yaml               # Configuration file for the UR5 controllers</div>
<div class="line">├── params/</div>
<div class="line">│   ├── ur5_bridge.yaml                   # Parameters file for the Gazebo bridge</div>
<div class="line">├── gripper/</div>
<div class="line">│   ├── open.script                       # Script to open the soft robotics gripper</div>
<div class="line">│   ├── close.script                      # Script to close the soft robotics gripper</div>
<div class="line">│   ├── neutral_from_open.script          # Script to move the gripper to a neutral position from the open position</div>
<div class="line">│   ├── neutral_from_closed.script        # Script to move the gripper to a neutral position from the closed position</div>
<div class="line">├── models/</div>
<div class="line">│   ├── desk.urdf.xacro                   # URDF file that defines the desk where the UR5 is mounted</div>
<div class="line">│   ├── desk.config                       # Config file auxiliary to the SDF file</div>
<div class="line">│   ├── ur_gz.ros2_control.xacro          # URDF file that defines the UR5 robot with ROS 2 control</div>
<div class="line">│   ├── ur_gz.urdf.xacro                  # URDF file that defines the UR5 robot</div>
<div class="line">│   ├── soft_robotics_gripper.urdf.xacro  # URDF file that defines the soft robotics gripper</div>
<div class="line">│   ├── camera.sdf                        # SDF file that defines the RGBD camera</div>
<div class="line">│   ├── block.urdf.xacro                  # URDF file that defines a block</div>
<div class="line">│   ├── block.config                      # Config file auxiliary to the SDF file</div>
<div class="line">│   ├── meshes</div>
<div class="line">│   |   ├── desk.stl                      # STL file with the 3D mesh of the desk</div>
<div class="line">│   |   ├── base.stl                      # STL file with the 3D mesh of the base of the soft robotics gripper</div>
<div class="line">│   |   ├── link1.stl                     # STL file with the 3D mesh of the first link of the soft robotics gripper</div>
<div class="line">│   |   ├── link2.stl                     # STL file with the 3D mesh of the second link of the soft robotics gripper</div>
<div class="line">│   |   ├── X*-Y*-Z*.stl                  # STL files with the 3D mesh of the blocks</div>
<div class="line">├── docker/</div>
<div class="line">│   ├── Dockerfile                        # Dockerfile for the ROS 2 UR5 interface docker image</div>
<div class="line">│   ├── entrypoint.sh                     # Entrypoint script used in the docker</div>
<div class="line">├── scripts/</div>
<div class="line">│   ├── ur5.sh                            # Starts the URSim simulator container</div>
<div class="line">│   ├── ros2.sh                           # Starts the pla10/ros2_ur5_interface container</div>
<div class="line">├── worlds/</div>
<div class="line">│   ├── empty.world                       # Gazebo world file with plugins for the UR5 simulation</div>
<div class="line">├── rviz/</div>
<div class="line">│   ├── ur5.rviz                          # RViz configuration file</div>
<div class="line">├── README.md                             # Project overview and instructions</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md6"></a>
Prerequisites</h1>
<ul>
<li><b>Docker</b>: Ensure Docker is installed and running on your system.</li>
<li><b>Docker Network Setup</b>: Create a Docker network named <code>ursim_net</code> before running the containers: <div class="fragment"><div class="line">docker network create --subnet=192.168.56.0/24 ursim_net</div>
</div><!-- fragment --></li>
</ul>
<h1><a class="anchor" id="autotoc_md7"></a>
Simulation</h1>
<p>You can choose between two simulation environments:</p><ul>
<li><b>URSim</b>: A graphical simulation environment for the UR5 robot that uses a dedicated Docker container. This solution is preferred since it is lightweight and simulates the real connection with the robot. But with this solution you can simulate ONLY the robot, not the environment (no cameras, external sensors, etc).</li>
<li><b>Gazebo</b>: A more complex simulation environment that uses the ROS 2 Gazebo bridge and is included in the <a href="https://hub.docker.com/r/pla10/ros2_ur5_interface">pla10/ros2_ur5_interface</a> Docker image.</li>
</ul>
<h1><a class="anchor" id="autotoc_md8"></a>
How to Use (URSim)</h1>
<h2><a class="anchor" id="autotoc_md9"></a>
1. Start the UR5 Simulator</h2>
<p>Run the URSim container using the provided bash script: </p><div class="fragment"><div class="line">bash scripts/ur5.sh</div>
</div><!-- fragment --><p> This starts the <a href="https://hub.docker.com/r/pla10/ursim_e-series">pla10/ursim_e-series</a> Docker container for UR5 simulation. Access the simulator via your browser at <a href="http://localhost:6080">http://localhost:6080</a>.</p>
<p><img src="https://gyazo.com/7e2514442ef1753eb8b20e2b674056fc/raw" alt="UR5 Simulation" style="display: block; margin-left: auto; margin-right: auto;" width="800" class="inline"/></p>
<p>To prepare the robot to work with ROS2 you need to go to the program tab and add the URCaps &gt; External Control.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md11"></a>
2. Start the ROS 2 Interface</h2>
<p>Run the ROS 2 container using the provided bash script: </p><div class="fragment"><div class="line">bash scripts/ros2.sh</div>
</div><!-- fragment --><p> This starts the <a href="https://hub.docker.com/r/pla10/ros2_ur5_interface">pla10/ros2_ur5_interface</a> container. Access the environment via noVNC at <a href="http://localhost:6081">http://localhost:6081</a>.</p>
<p><img src="https://gyazo.com/ca4a65bce9e2ac0e5217edfc423d5fa9/raw" alt="UR5 Simulation" style="display: block; margin-left: auto; margin-right: auto;" width="800" class="inline"/></p>
<p>The user password is "ubuntu".</p>
<hr  />
<h2><a class="anchor" id="autotoc_md13"></a>
3. Run ROS 2 Nodes</h2>
<ul>
<li>Open a terminal inside the ROS 2 container (accessible via noVNC).</li>
<li>Navigate to the ROS 2 workspace: <div class="fragment"><div class="line">cd /home/ubuntu/ros2_ws</div>
</div><!-- fragment --></li>
<li>Source the ROS 2 setup: <div class="fragment"><div class="line">source install/setup.bash</div>
</div><!-- fragment --></li>
<li>Launch the control nodes using the provided launch files: <div class="fragment"><div class="line">ros2 launch ros2_ur5_interface interface.launch.py</div>
</div><!-- fragment --></li>
</ul>
<h1><a class="anchor" id="autotoc_md14"></a>
How to Use (Gazebo)</h1>
<h2><a class="anchor" id="autotoc_md15"></a>
1. Start the UR5 Gazebo Simulation</h2>
<p>Run the ROS 2 container using the provided bash script: </p><div class="fragment"><div class="line">bash scripts/ros2.sh</div>
</div><!-- fragment --><p> This starts the <a href="https://hub.docker.com/r/pla10/ros2_ur5_interface">pla10/ros2_ur5_interface</a> container. Access the environment via noVNC at <a href="http://localhost:6081">http://localhost:6081</a>.</p>
<ul>
<li>Open a terminal inside the ROS 2 container (accessible via noVNC).</li>
<li>Navigate to the ROS 2 workspace: <div class="fragment"><div class="line">cd /home/ubuntu/ros2_ws</div>
</div><!-- fragment --></li>
<li>Source the ROS 2 setup: <div class="fragment"><div class="line">source install/setup.bash</div>
</div><!-- fragment --></li>
<li>Launch the simulation nodes using the provided launch files: <div class="fragment"><div class="line">ros2 launch ros2_ur5_interface sim.launch.py</div>
</div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="autotoc_md16"></a>
2. Run ROS 2 Example Node</h2>
<p>Run the trajectory publication node to visualize the UR5 robot moving: </p><div class="fragment"><div class="line">ros2 run ros2_ur5_interface publish_trajectory_node</div>
</div><!-- fragment --><p><img src="https://gyazo.com/e25c7f6d13dd8dd77d8a149f36bf9e17/raw" alt="UR5 Trajectory Simulation" style="display: block; margin-left: auto; margin-right: auto;" width="800" class="inline"/></p>
<p><br  />
<br  />
</p>
<h1><a class="anchor" id="autotoc_md17"></a>
Connect to the real UR5 robot</h1>
<p>Check the robot's IP address by following these steps:</p><ol type="1">
<li>Press the burger menu button on the top right of the robot's teach pendant.</li>
<li>Select "Settings".</li>
<li>Navigate to "System" &gt; "Network".</li>
<li>Check the IP address.</li>
</ol>
<p><img src="https://i.gyazo.com/thumb/3024/243c42358c019f3e0c9f0345ed28e31b-heic.jpg" alt="" style="display: block; margin-left: auto; margin-right: auto;" width="600" class="inline"/></p>
<p><br  />
<br  />
</p>
<p>Check under the installation tab if in the URCaps &gt; External Control your IP address is the same as the one you are using to connect to the robot.</p>
<p><img src="https://i.gyazo.com/954c9c5d830a27f247d87145b050b057.png" alt="" style="display: block; margin-left: auto; margin-right: auto;" width="700" class="inline"/></p>
<p><br  />
<br  />
</p>
<p>To connect to the real UR5 robot you need to specify the IP address of the robot when launching the <a class="el" href="interface_8launch_8py.html">interface.launch.py</a> file. You can do this by adding the following argument to the launch command: </p><div class="fragment"><div class="line">ros2 launch ros2_ur5_interface interface.launch.py robot_ip:=&lt;robot_ip&gt;</div>
</div><!-- fragment --><p><br  />
<br  />
</p>
<p><img src="images/ur5_demo1.gif" alt="" width="45%" style="display: inline-block; margin-right: 5px;" class="inline"/> <img src="images/ur5_demo2.gif" alt="" width="45%" style="display: inline-block; margin-left: 5px;" class="inline"/> </p>
<hr  />
<h1><a class="anchor" id="autotoc_md19"></a>
Contributions</h1>
<p>Students and contributors are welcome to improve this repository by adding new nodes, launch files, or other auxiliary tools. Feel free to open issues or submit pull requests.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md21"></a>
License</h1>
<p>This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details. </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_2d1af1354bc516cd7be7c497ce004061.html">ros2_ur5_interface</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
